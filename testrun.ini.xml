<?xml version="1.0"?>
<Params>
  <MCControl><!--{{{-->

    <Cfg>
      <!-- TODO What type of configuration do we want to start with, `UNIT` (cold) or `DISORDERED` (hot) or `WEAK_FIELD` (no idea) perhaps? -->
      <cfg_type>UNIT</cfg_type>
      <cfg_file>DUMMY</cfg_file>
    </Cfg>

    <RNG>
      <Seed>
        <!-- TODO Do we want any special seeds here? -->
        <elem>11</elem>
        <elem>0 </elem>
        <elem>0 </elem>
        <elem>0 </elem>
      </Seed>
    </RNG>

    <!-- TODO How many trajectories do we want? -->
    <StartUpdateNum>0</StartUpdateNum>
    <NWarmUpUpdates>0</NWarmUpUpdates>
    <NProductionUpdates>2</NProductionUpdates>
    <NUpdatesThisRun>2</NUpdatesThisRun>
    <SaveInterval>1</SaveInterval>

    <!-- This probably generates a single LIME file for everything. -->
    <SavePrefix>testrun</SavePrefix>
    <SaveVolfmt>SINGLEFILE</SaveVolfmt>

    <!-- TODO Do we want such an inline measurement? In the tutorial this is used to show the thermalization from the cold and hot start. -->
    <InlineMeasurements>
      <elem>
        <Name>POLYAKOV_LOOP</Name>
        <Frequency>1</Frequency>
        <Param>
          <version>2</version>
        </Param>
        <NamedObject>
          <gauge_id>default_gauge_field</gauge_id>
        </NamedObject>
      </elem>
    </InlineMeasurements>
  </MCControl><!--}}}-->

  <HMCTrj>
    <Monomials>
      <!-- (gauge) Gauge {{{ -->
      <elem>
        <!-- Tree level Symanzik improved gauge, here it is called Lüscher-Weiß. The β is set to the value from the paper. -->
        <Name>GAUGE_MONOMIAL</Name>
        <GaugeAction>
          <Name>LW_TREE_GAUGEACT</Name>
          <beta>3.3</beta>
          <u0>0.832605301399891</u0>
          <GaugeBC>
            <Name>PERIODIC_GAUGEBC</Name>
          </GaugeBC>
        </GaugeAction>
        <NamedObject>
          <monomial_id>gauge</monomial_id>
        </NamedObject>
      </elem><!--}}}-->

      <!-- (up_down_hasenbusch_1) Wilson + clover: up, down {{{ -->
      <elem>
        <Name>TWO_FLAVOR_EOPREC_CONSTDET_RATIO_CONV_CONV_FERM_MONOMIAL</Name>
        <Action>
          <!-- This is the numerator. -->
          <InvertParam>
            <invType>CG_INVERTER</invType>
            <RsdCG>1.0e-12</RsdCG>
            <MaxCG>1000</MaxCG>
          </InvertParam>
          <FermionAction>
            <FermAct>CLOVER</FermAct>
            <!-- This particular mass is the desired one, so that should not be changed. -->
            <Mass>-0.1265</Mass>
            <clovCoeff>1.24930970916466</clovCoeff>
            <FermState>
              <Name>STOUT_FERM_STATE</Name>
              <rho>1.0</rho>
              <n_smear>6</n_smear>
              <FermionBC>
                <FermBC>TWISTED_FERMBC</FermBC>
                <boundary>1 1 1 1</boundary>
                <phases_by_pi>1.0 1.0 1.0</phases_by_pi>
                <phases_dir>1 1 1</phases_dir>
              </FermionBC>
            </FermState>
          </FermionAction>
        </Action>
        <PrecAction>
          <!-- This is the denominator. -->
          <InvertParam>
            <invType>CG_INVERTER</invType>
            <RsdCG>1.0e-12</RsdCG>
            <MaxCG>1000</MaxCG>
          </InvertParam>
          <FermionAction>
            <FermAct>CLOVER</FermAct>
            <Mass>-0.1265</Mass>
            <clovCoeff>1.24930970916466</clovCoeff>
            <FermState>
              <Name>STOUT_FERM_STATE</Name>
              <rho>1.0</rho>
              <n_smear>6</n_smear>
              <FermionBC>
                <FermBC>TWISTED_FERMBC</FermBC>
                <boundary>1 1 1 1</boundary>
                <phases_by_pi>1.0 1.0 1.0</phases_by_pi>
                <phases_dir>1 1 1</phases_dir>
              </FermionBC>
            </FermState>
          </FermionAction>
        </PrecAction>
        <ChronologicalPredictor>
          <Name>LAST_SOLUTION_4D_PREDICTOR</Name>
        </ChronologicalPredictor>
        <NamedObject>
          <monomial_id>up_down_hasenbusch_1</monomial_id>
        </NamedObject>
      </elem><!--}}}-->

      <!-- (up_down_hasenbusch_last) Wilson + clover: up, down {{{ -->
      <elem>
        <Name>TWO_FLAVOR_EOPREC_CONSTDET_FERM_MONOMIAL</Name>
        <InvertParam>
          <invType>CG_INVERTER</invType>
          <RsdCG>1.0e-12</RsdCG>
          <MaxCG>1000</MaxCG>
        </InvertParam>
        <FermionAction>
          <FermAct>CLOVER</FermAct>
          <Mass>-0.1265</Mass>
          <clovCoeff>1.24930970916466</clovCoeff>
          <FermState>
            <Name>STOUT_FERM_STATE</Name>
            <rho>1.0</rho>
            <n_smear>6</n_smear>
            <FermionBC>
              <FermBC>TWISTED_FERMBC</FermBC>
              <boundary>1 1 1 1</boundary>
              <phases_by_pi>1.0 1.0 1.0</phases_by_pi>
              <phases_dir>1 1 1</phases_dir>
            </FermionBC>
          </FermState>
          </FermionAction>
        <ChronologicalPredictor>
          <Name>LAST_SOLUTION_4D_PREDICTOR</Name>
        </ChronologicalPredictor>
        <NamedObject>
          <monomial_id>up_down_hasenbusch_last</monomial_id>
        </NamedObject>
      </elem><!--}}}-->

      <!-- (up_down_clover) Clover even-even: up, down {{{ -->
      <elem>
        <Name>N_FLAVOR_LOGDET_EVEN_EVEN_FERM_MONOMIAL</Name>
        <FermionAction>
          <FermAct>CLOVER</FermAct>
          <Mass>-0.1265</Mass>
          <clovCoeff>1.24930970916466</clovCoeff>
          <!--
          <ZeroEnergy>0</ZeroEnergy>
          <AnisoParam>
            <anisoP>false</anisoP>
            <t_dir>3</t_dir>
            <xi_0>1</xi_0>
            <nu>1</nu>
          </AnisoParam>
-->
          <FermState>
            <Name>STOUT_FERM_STATE</Name>
            <rho>1.0</rho>
            <n_smear>6</n_smear>
            <FermionBC>
              <FermBC>TWISTED_FERMBC</FermBC>
              <boundary>1 1 1 1</boundary>
              <phases_by_pi>1.0 1.0 1.0</phases_by_pi>
              <phases_dir>1 1 1</phases_dir>
            </FermionBC>
          </FermState>
        </FermionAction>
        <num_flavors>2</num_flavors>
        <NamedObject>
          <monomial_id>up_down_clover</monomial_id>
        </NamedObject>
      </elem><!--}}}-->

      <!-- (strange) Wilson + clover: strange {{{ -->
      <elem>
        <Name>ONE_FLAVOR_EOPREC_CONSTDET_FERM_RAT_MONOMIAL</Name>
        <num_pf>1</num_pf>
        <Action>
          <FermionAction>
            <FermAct>CLOVER</FermAct>
            <Mass>-0.057</Mass>
            <clovCoeff>1.24930970916466</clovCoeff>
            <FermState>
              <Name>STOUT_FERM_STATE</Name>
              <rho>1.0</rho>
              <n_smear>6</n_smear>
              <FermionBC>
                <FermBC>TWISTED_FERMBC</FermBC>
                <boundary>1 1 1 1</boundary>
                <phases_by_pi>1.0 1.0 1.0</phases_by_pi>
                <phases_dir>1 1 1</phases_dir>
              </FermionBC>
            </FermState>
          </FermionAction>
          <ActionApprox>
            <InvertParam>
              <invType>CG_INVERTER</invType>
              <RsdCG>1.0e-12</RsdCG>
              <MaxCG>1000</MaxCG>
            </InvertParam>
            <RationalApprox>
              <ratApproxType>READ_COEFFS</ratApproxType>
              <Param>
                <annotation>
                  Single strange Flavour, Action piece.
                  power is -1/4
                </annotation>
                <lowerMin>1.0e-3</lowerMin>
                <upperMax>33</upperMax>
                <numPower>-1</numPower>
                <denPower>4</denPower>
                <degree>16</degree>
              </Param>
              <ApproxInfo>
                <lowerMin>0.001</lowerMin>
                <upperMax>33</upperMax>
                <degree>16</degree>
                <error>5.15211405051482e-11</error>
              </ApproxInfo>
              <PFECoeffs>
                <norm>0.155599823000314</norm>
                <res>0.000520383284200624 0.00102660572124056 0.00181178793402857 0.00321671030885498 0.00577691086696587 0.0104481579630266 0.0189694277532285 0.0345269234349506 0.0630140232665876 0.11554658170993 0.21397301598633 0.404952046467655 0.804682609571783 1.78771947718812 5.1998544047142 33.2821966055558</res>
                <pole>6.64546366309794e-05 0.000487449195727835 0.00157062032741528 0.00404382974795785 0.00956902321293472 0.0218606410513497 0.0491901693924068 0.109989034422501 0.245460798566869 0.548409030799076 1.23135074841675 2.79887228398744 6.54558220539221 16.3751974576828 48.6939394291419 253.394153115071</pole>
              </PFECoeffs>
              <IPFECoeffs>
                <norm>6.42674252912215</norm>
                <res>-7.29056568824904e-06 -3.08449297938295e-05 -9.37710341257919e-05 -0.000264162081194322 -0.000727076084674794 -0.00198489654440102 -0.00540368881578466 -0.0147100906225067 -0.0401422330222872 -0.110265593261843 -0.307507964338403 -0.887366185888659 -2.76674191920454 -10.330167418357 -60.7697414728541 -1657.35364282683</res>
                <pole>0.000130231892071377 0.000677702407873996 0.00201524287479766 0.00504156833792643 0.0117904629620992 0.0267998375299895 0.0601740637857775 0.134441019473055 0.300029909102002 0.670865752397552 1.50956231898618 3.44862785528548 8.16058094845985 21.0108066373413 67.6993629063764 496.579346046959</pole>
              </IPFECoeffs>
            </RationalApprox>
          </ActionApprox>
          <ForceApprox>
            <InvertParam>
              <invType>CG_INVERTER</invType>
              <RsdCG>1e-7 1e-7 1e-7 1e-8 1e-8 1e-8 1e-9 1e-9 1e-9 1e-9 1e-10 1e-10 1e-10 1e-10</RsdCG>
              <MaxCG>5000</MaxCG>
            </InvertParam>
            <RationalApprox>
              <ratApproxType>READ_COEFFS</ratApproxType>
              <Param>
                <annotation>
                  Single strange Flavour, Force piece.
                  power is -1/2
                </annotation>
                <lowerMin>1.0e-3</lowerMin>
                <upperMax>33</upperMax>
                <numPower>-1</numPower>
                <denPower>2</denPower>
                <degree>14</degree>
              </Param>
              <ApproxInfo>
                <lowerMin>0.001</lowerMin>
                <upperMax>33</upperMax>
                <degree>14</degree>
                <error>1.4743562084473e-09</error>
              </ApproxInfo>
              <PFECoeffs>
                <norm>0.0251773260361138</norm>
                <res>0.00938447081670725 0.0113556356385765 0.015712245775329 0.0233704650580646 0.0359432248979228 0.0560886542713153 0.0881062194115078 0.138988372319098 0.220476881003024 0.353893180549329 0.584538806469361 1.03738468679401 2.21944414498477 8.30625906187251</res>
                <pole>5.25088256299576e-05 0.000541070967033193 0.00195024255755797 0.00552632726119316 0.0144330242366399 0.0365557187762636 0.091516089737837 0.22828194229081 0.570076879879339 1.43344757660573 3.67347605678986 9.89378007837651 30.5627463768969 149.277768177754</pole>
              </PFECoeffs>
              <IPFECoeffs>
                <norm>39.7182766178435</norm>
                <res>-2.23452961610184e-06 -1.42439478447941e-05 -6.35310799261578e-05 -0.00025967481522029 -0.00103247483279225 -0.00406693386569719 -0.0159884462327013 -0.0630641527026447 -0.251614273909366 -1.03436369354839 -4.58738368000716 -24.7646340755357 -232.527272190937 -20404.0362904484</res>
                <pole>0.000221064398288062 0.00107974589695072 0.00333542889962994 0.00898331702448543 0.0230214209006101 0.0578869292278345 0.144558083170508 0.360592329660653 0.902731531609977 2.28642309878658 5.97141617575416 16.9209721488805 60.9901510349853 628.465778925603</pole>
              </IPFECoeffs>
            </RationalApprox>
          </ForceApprox>
        </Action>
        <ChronologicalPredictor>
          <Name>LAST_SOLUTION_4D_PREDICTOR</Name>
        </ChronologicalPredictor>
        <NamedObject>
          <monomial_id>strange</monomial_id>
        </NamedObject>
      </elem><!--}}}-->

      <!-- (strange_clover) Clover even-even: strange {{{ -->
      <elem>
        <Name>N_FLAVOR_LOGDET_EVEN_EVEN_FERM_MONOMIAL</Name>
        <FermionAction>
          <FermAct>CLOVER</FermAct>
          <Mass>-0.057</Mass>
          <clovCoeff>1.24930970916466</clovCoeff>
          <!--
          <ZeroEnergy>0</ZeroEnergy>
          <AnisoParam>
            <anisoP>false</anisoP>
            <t_dir>3</t_dir>
            <xi_0>1</xi_0>
            <nu>1</nu>
          </AnisoParam>
-->
          <FermState>
            <Name>STOUT_FERM_STATE</Name>
            <rho>1.0</rho>
            <n_smear>6</n_smear>
            <FermionBC>
              <FermBC>TWISTED_FERMBC</FermBC>
              <boundary>1 1 1 1</boundary>
              <phases_by_pi>1.0 1.0 1.0</phases_by_pi>
              <phases_dir>1 1 1</phases_dir>
            </FermionBC>
          </FermState>
        </FermionAction>
        <num_flavors>1</num_flavors>
        <NamedObject>
          <monomial_id>strange_clover</monomial_id>
        </NamedObject>
      </elem><!--}}}-->
    </Monomials>

    <Hamiltonian><!--{{{-->
      <monomial_ids>
        <elem>gauge</elem>
        <elem>up_down_hasenbusch_1</elem>
        <elem>up_down_hasenbusch_last</elem>
        <elem>up_down_clover</elem>
        <elem>strange</elem>
        <elem>strange_clover</elem>
      </monomial_ids>
    </Hamiltonian><!--}}}-->

    <MDIntegrator><!--{{{-->
      <tau0>0.5</tau0>
      <Integrator>
        <Name>LCM_STS_MIN_NORM_2</Name>
        <n_steps>25</n_steps>
        <monomial_ids>
          <elem>up_down_hasenbusch_1</elem>
          <elem>up_down_hasenbusch_last</elem>
          <elem>up_down_clover</elem>
          <elem>strange</elem>
          <elem>strange_clover</elem>
        </monomial_ids>
        <SubIntegrator>
          <Name>LCM_STS_MIN_NORM_2</Name>
          <n_steps>2</n_steps>
          <monomial_ids>
            <elem>gauge</elem>
          </monomial_ids>
        </SubIntegrator>
      </Integrator>
    </MDIntegrator><!--}}}-->

    <!-- <nrow>24 24 24 64</nrow> -->
    <nrow>4 4 4 8</nrow>

  </HMCTrj>

</Params>

<!-- vim: set foldcolumn=1 foldlevel=0 foldmethod=marker shiftwidth=2 expandtab : -->
